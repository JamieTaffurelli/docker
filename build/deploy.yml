parameters:
  environment: "Production"
  poolName: ""

jobs:
  - deployment: Deploy_Resources_Upload_Templates
    pool:
      vmImage: ${{ parameters.poolName }}
      workspace:
        clean: all
    condition: and(succeeded(), ne(variables['Build.Reason'], 'PullRequest'))
    environment: ${{ parameters.environment }}
    strategy:
      runOnce:
        deploy:
          steps:
            - download: current
              displayName: Download ARM Templates
              artifact: templates

            - task: Docker@2
              inputs:
                containerRegistry: 'dockerhub'
                repository: 'azuredevops'
                command: 'push'
                tags: 'latest'
